{"version":3,"sources":["index.js"],"names":["refs","form","document","querySelector","input","button","ul","loadMoreBtn","BASE_URL","URL_KEY","page","searchingWord","countItems","fetchImgs","search","fetch","then","resp","json","createMarkup","previewURL","likes","views","comments","downloads","tags","renderSetchQuery","imgs","hits","length","innerHTML","map","img","join","renderImgs","totalHits","classList","add","markup","insertAdjacentHTML","onSearchPhoto","e","preventDefault","value","resetPage","remove","incrementPage","addEventListener","onLoadMore"],"mappings":";;;AAiFA,aAjFA,QAAA,oBAEA,MAAMA,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,MAAOF,SAASC,cAAc,SAC9BE,OAAQH,SAASC,cAAc,UAC/BG,GAAIJ,SAASC,cAAc,iBAC3BI,YAAaL,SAASC,cAAc,SAGhCK,EAAW,2BACXC,EAAU,qCAChB,IAAIC,EAAO,EACPC,EAAgB,GAChBC,EAAa,EAEjB,MAAMC,EAAY,CAACC,EAAS,MAAOJ,IAC1BK,SACFP,SAAgBC,OAAaK,+EAAoFJ,KACpHM,KAAKC,GAAQA,EAAKC,QAGhBC,EAAe,EAAGC,WAAAA,EAAYC,MAAAA,EAAOC,MAAAA,EAAOC,SAAAA,EAAUC,UAAAA,EAAWC,KAAAA,0BAEzDL,WAAoBK,4EAGdJ,6DAGAC,gEAGGC,iEAGCC,qCAOxB,SAASE,EAAiBC,GACxBf,EAAae,EAAKC,KAAKC,OAEvB7B,EAAKM,GAAGwB,UAAYH,EAAKC,KAAKG,IAAIC,GAAOb,EAAaa,IAAMC,KAAK,IAGnE,SAASC,EAAWP,IACbf,EAAae,EAAKQ,YAAYnC,EAAKO,YAAY6B,UAAUC,IAAI,aAC5DC,MAAAA,EAASX,EAAKC,KAAKG,IAAIC,GAAOb,EAAaa,IAAMC,KAAK,IAC5DrB,GAAce,EAAKC,KAAKC,OAExB7B,EAAKM,GAAGiC,mBAAmB,YAAaD,GAG1C,MAAME,EAAgBC,IACpBA,EAAEC,iBAEF/B,EAAgBX,EAAKI,MAAMuC,MAC3BC,IACA/B,EAAUF,EAAeD,GAAMM,KAAKW,IAClCD,EAAiBC,GAEjB3B,EAAKO,YAAY6B,UAAUS,OAAO,gBAIhCD,EAAY,IAAOlC,EAAO,EAE1BoC,EAAgB,IAAOpC,GAAQ,EAErCV,EAAKC,KAAK8C,iBAAiB,SAAUP,GAErC,MAAMQ,EAAaP,IACjBK,IAEAjC,EAAUF,EAAeD,GAAMM,KAAKW,GAAQO,EAAWP,KAGzD3B,EAAKO,YAAYwC,iBAAiB,QAASC","file":"src.d3b99003.js","sourceRoot":"../src","sourcesContent":["import './css/styles.css';\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  input: document.querySelector('input'),\n  button: document.querySelector('button'),\n  ul: document.querySelector('.photos__list'),\n  loadMoreBtn: document.querySelector('.btn'),\n};\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst URL_KEY = '24469926-df466a8874aa59a8d5a89b872';\nlet page = 1;\nlet searchingWord = '';\nlet countItems = 0;\n\nconst fetchImgs = (search = 'cat', page) => {\n  return fetch(\n    `${BASE_URL}?key=${URL_KEY}&q=${search}&image_type=photo&orientation=horizontal&safesearch=true&per_page=200&page=${page}`,\n  ).then(resp => resp.json());\n};\n\nconst createMarkup = ({ previewURL, likes, views, comments, downloads, tags }) => {\n  return `<li>\n  <img src=\"${previewURL}\" alt=\"${tags}\" >\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes</b>${likes}\n    </p>\n    <p class=\"info-item\">\n      <b>Views</b>${views}\n    </p>\n    <p class=\"info-item\">\n      <b>Comments</b>${comments}\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads</b>${downloads}\n    </p>\n  </div>\n  \n  </li>`;\n};\n\nfunction renderSetchQuery(imgs) {\n  countItems = imgs.hits.length;\n\n  refs.ul.innerHTML = imgs.hits.map(img => createMarkup(img)).join('');\n}\n\nfunction renderImgs(imgs) {\n  if ((countItems = imgs.totalHits)) refs.loadMoreBtn.classList.add('is-hidden');\n  const markup = imgs.hits.map(img => createMarkup(img)).join('');\n  countItems += imgs.hits.length;\n\n  refs.ul.insertAdjacentHTML('beforeend', markup);\n}\n\nconst onSearchPhoto = e => {\n  e.preventDefault();\n\n  searchingWord = refs.input.value;\n  resetPage();\n  fetchImgs(searchingWord, page).then(imgs => {\n    renderSetchQuery(imgs);\n\n    refs.loadMoreBtn.classList.remove('is-hidden');\n  });\n};\n\nconst resetPage = () => (page = 1);\n\nconst incrementPage = () => (page += 1);\n\nrefs.form.addEventListener('submit', onSearchPhoto);\n\nconst onLoadMore = e => {\n  incrementPage();\n\n  fetchImgs(searchingWord, page).then(imgs => renderImgs(imgs));\n};\n\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n"]}